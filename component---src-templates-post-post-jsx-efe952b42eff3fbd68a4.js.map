{"version":3,"file":"component---src-templates-post-post-jsx-efe952b42eff3fbd68a4.js","mappings":"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","sources":["webpack://talentan_gatsby_blog/./node_modules/gatsby-plugin-valine-comment/dist/valine.js","webpack://talentan_gatsby_blog/./node_modules/gatsby-plugin-valine-comment/dist/index.js","webpack://talentan_gatsby_blog/./src/images/support.jpg","webpack://talentan_gatsby_blog/./src/templates/post/post.jsx","webpack://talentan_gatsby_blog/./src/templates/post/post.module.less"],"sourcesContent":["import React from 'react';\r\nconst valineOptions = [\r\n    'el',\r\n    'appId',\r\n    'appKey',\r\n    'placeholder',\r\n    'path',\r\n    'pure',\r\n    'avatar',\r\n    'meta',\r\n    'pageSize',\r\n    'lang',\r\n    'langMode',\r\n    'visitor',\r\n    'highlight',\r\n    'avatarForce',\r\n    'recordIP',\r\n    'serverURLs',\r\n    'emojiCDN',\r\n    'emojiMaps',\r\n    'enableQQ',\r\n    'requiredFields',\r\n];\r\nconst buildValine = async (options) => {\r\n    const RealValine = (await import('valine')).default;\r\n    new RealValine(options);\r\n};\r\nconst buildPureValine = async (options) => {\r\n    const RealValine = (await import('valine/dist/Valine.Pure.min')).default;\r\n    new RealValine(options);\r\n};\r\n/**\r\n * Valine component\r\n * @returns React Element\r\n */\r\nexport default function Valine(props) {\r\n    const ref = React.useRef(null);\r\n    const others = {};\r\n    for (const key in props) {\r\n        if (!valineOptions.includes(key)) {\r\n            others[key] = props[key];\r\n        }\r\n    }\r\n    React.useEffect(() => {\r\n        const options = { ...window.valineOptions, ...props };\r\n        if (ref.current) {\r\n            if (options.pure) {\r\n                buildPureValine({\r\n                    ...options,\r\n                    el: ref.current,\r\n                });\r\n            }\r\n            else {\r\n                buildValine({\r\n                    ...options,\r\n                    el: ref.current,\r\n                });\r\n            }\r\n        }\r\n    }, [props, ref]);\r\n    // other props will transfer to div\r\n    return React.createElement(\"div\", { ref: ref, ...others });\r\n}\r\n","import Valine from './valine';\r\nexport default Valine;\r\n","export default __webpack_public_path__ + \"static/support-eaff4616e0f7557ff6c06e109b031c6c.jpg\";","import React, { useState, useEffect, useRef } from 'react';\nimport { Layout, Button } from 'antd';\nimport { graphql } from 'gatsby';\nimport Img from 'gatsby-image';\n// import Valine from 'gatsby-plugin-valine';\nimport Valine from 'gatsby-plugin-valine-comment';\nimport Header from '../../components/PageLayout/Header';\nimport SidebarWrapper from '../../components/PageLayout/Sidebar';\nimport SEO from '../../components/Seo';\nimport support from '../../images/support.jpg';\n\nimport 'prismjs/themes/prism-solarizedlight.css';\nimport './highlight-syntax.less';\nimport * as style from './post.module.less';\n\nconst Post = ({ data }) => {\n  const [showSupport, setShowSupport] = useState(false);\n  const { html, frontmatter } = data.markdownRemark;\n  const {\n    title,\n    cover: {\n      childImageSharp: { fluid },\n    },\n    excerpt,\n    path,\n    isTranslated = false,\n    keywords = [],\n    prePage = '',\n    nextPage = '',\n  } = frontmatter;\n\n  const hasLinkPage = prePage || nextPage; // 是否有上一页 | 下一页\n\n  const goSupportRef = useRef();\n  const supportCodeRef = useRef();\n\n  useEffect(() => {\n    const hideSupport = e => {\n      if (e.target !== supportCodeRef.current && e.target !== goSupportRef.current) {\n        setShowSupport(false);\n      }\n    };\n    document.addEventListener('click', hideSupport);\n    return () => {\n      document.removeEventListener('click', hideSupport);\n    };\n  }, []);\n\n  return (\n    <Layout className=\"outerPadding\">\n      <Layout className=\"container\">\n        <SEO title={title} description={excerpt} path={path} keywords={keywords} />\n        <Header />\n        <SidebarWrapper>\n          <div className=\"marginTopTitle\">\n            <h1>{`${isTranslated ? '[译] ' : ''}${title}`}</h1>\n            <div className={style.bannerImgContainer}>\n              <Img className={style.bannerImg} fluid={fluid} title={excerpt} alt={title} />\n            </div>\n            <article className={style.blogArticle} dangerouslySetInnerHTML={{ __html: html }} />\n            <Valine\n              appId=\"54IT3YbBjdv98afrYDGxAyhv-gzGzoHsz\"\n              appKey=\"aijtas9PQHTSFT9y53JTquND\"\n              path={path}\n              placeholder=\"没启用验证码，相信你不会恶意留言🤓\"\n              highlight={false}\n              meta={['nick']}\n              avatar={'hide'} // 头像\n              requiredFields={['nick']}\n            />\n            {hasLinkPage && (\n              <div className={style.links}>\n                <Button href={`/${prePage}`} type=\"link\" disabled={!prePage}>\n                  上一章\n                </Button>\n                <Button href={`/${nextPage}`} type=\"link\" disabled={!nextPage}>\n                  下一章\n                </Button>\n              </div>\n            )}\n            <div className={style.announcement}>\n              <span className={style.label}>\n                <span style={{ marginRight: '8px', color: '#fa8c16', fontSize: '15px' }}>⚠️</span>\n                {isTranslated\n                  ? `著作权归原作者所有，本译文仅供学习分享，禁做商用。`\n                  : `著作权归作者所有。商业转载请联系作者获得授权；非商业转载请注明作者、出处。`}\n              </span>\n            </div>\n          </div>\n          <div\n            className={style.hamburgerText}\n            onClick={() => setShowSupport(true)}\n            ref={goSupportRef}\n          >\n            赞赏\n          </div>\n          {showSupport && <img src={support} className={style.supportImg} ref={supportCodeRef} />}\n        </SidebarWrapper>\n      </Layout>\n    </Layout>\n  );\n};\n\nexport const pageQuery = graphql`\n  query ($postPath: String!) {\n    markdownRemark(frontmatter: { path: { eq: $postPath } }) {\n      html\n      timeToRead\n      frontmatter {\n        title\n        date(formatString: \"DD MMM YYYY\")\n        tags\n        path\n        excerpt\n        keywords\n        isTranslated\n        prePage\n        nextPage\n        cover {\n          childImageSharp {\n            fluid(maxWidth: 1000) {\n              ...GatsbyImageSharpFluid_tracedSVG\n            }\n          }\n        }\n      }\n    }\n    allMarkdownRemark(\n      filter: {\n        frontmatter: { path: { ne: $postPath } }\n        fileAbsolutePath: { regex: \"/index.md$/\" }\n      }\n    ) {\n      edges {\n        node {\n          frontmatter {\n            path\n            title\n            tags\n            excerpt\n            cover {\n              childImageSharp {\n                fluid(maxWidth: 600) {\n                  ...GatsbyImageSharpFluid_tracedSVG\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport default Post;\n","// extracted by mini-css-extract-plugin\nexport var announcement = \"post-module--announcement--368f4\";\nexport var bannerImg = \"post-module--bannerImg--f9d0f\";\nexport var bannerImgContainer = \"post-module--bannerImgContainer--c0c99\";\nexport var blogArticle = \"post-module--blogArticle--53e52\";\nexport var hamburgerText = \"post-module--hamburgerText--0f1cb\";\nexport var label = \"post-module--label--4039d\";\nexport var links = \"post-module--links--3cef2\";\nexport var supportImg = \"post-module--supportImg--1f664\";"],"names":["valineOptions","props","ref","React","others","key","includes","options","window","current","pure","async","RealValine","default","buildPureValine","el","buildValine","Post","data","showSupport","setShowSupport","useState","html","frontmatter","markdownRemark","title","cover","childImageSharp","fluid","excerpt","path","isTranslated","keywords","prePage","nextPage","hasLinkPage","goSupportRef","useRef","supportCodeRef","useEffect","hideSupport","e","target","document","addEventListener","removeEventListener","_Layout","className","SEO","description","Header","SidebarWrapper","Img","alt","dangerouslySetInnerHTML","__html","Valine","appId","appKey","placeholder","highlight","meta","avatar","requiredFields","_Button","href","type","disabled","style","marginRight","color","fontSize","onClick","src","support"],"sourceRoot":""}