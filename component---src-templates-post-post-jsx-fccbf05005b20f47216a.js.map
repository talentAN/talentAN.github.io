{"version":3,"sources":["webpack:///./src/images/support.jpg","webpack:///./src/templates/post/post.module.less","webpack:///./src/components/Comment/index.jsx","webpack:///./src/templates/post/post.jsx"],"names":["module","exports","Comments","React","Component","componentDidMount","pageCanonicalUrl","pageId","this","props","window","DISQUS","reset","reload","config","page","url","identifier","disqus_config","d","document","s","createElement","src","Config","disqusScript","setAttribute","Date","head","body","appendChild","render","id","Post","data","showSupport","setShowSupport","useState","html","frontmatter","markdownRemark","title","cover","childImageSharp","fluid","excerpt","path","isTranslated","keywords","prePage","nextPage","hasLinkPage","canonicalUrl","Utils","resolvePageUrl","siteUrl","pathPrefix","goSupportRef","useRef","supportCodeRef","useEffect","hideSupport","e","target","current","addEventListener","removeEventListener","className","description","Header","Sidebar","style","bannerImgContainer","bannerImg","alt","blogArticle","dangerouslySetInnerHTML","__html","Comment","links","href","type","disabled","announcement","size","icon","marginRight","color","label","hamburgerText","onClick","ref","support","supportImg"],"mappings":"iFAAAA,EAAOC,QAAU,IAA0B,uD,8CCC3CD,EAAOC,QAAU,CAAC,mBAAqB,yCAAyC,UAAY,gCAAgC,YAAc,kCAAkC,MAAQ,4BAA4B,aAAe,mCAAmC,MAAQ,4BAA4B,cAAgB,oCAAoC,WAAa,mC,mNCKvW,MAAMC,UAAiBC,IAAMC,UAC3BC,oBACE,MAAM,iBAAEC,EAAF,OAAoBC,GAAWC,KAAKC,MAEtCC,OAAOC,OACTD,OAAOC,OAAOC,MAAM,CAClBC,QAAQ,EACRC,SACEN,KAAKO,KAAKC,IAAMV,EAChBE,KAAKO,KAAKE,WAAaV,MAI3BG,OAAOQ,cAAgB,KACrBV,KAAKO,KAAKC,IAAMV,EAChBE,KAAKO,KAAKE,WAAaV,GAEzB,WAEE,MAAMY,EAAIC,SACJC,EAAIF,EAAEG,cAAc,UAC1BD,EAAEE,IAAMC,IAAOC,aACfJ,EAAEK,aAAa,kBAAmB,IAAIC,OACrCR,EAAES,MAAQT,EAAEU,MAAMC,YAAYT,GANjC,IAWJU,SACE,OACE,6BACE,yBAAKC,GAAG,oBAMD9B,Q,qFC6GA+B,UAvIF,EAAGC,WACd,MAAOC,EAAaC,GAAkBC,oBAAS,IACzC,KAAEC,EAAF,YAAQC,GAAgBL,EAAKM,gBAC7B,MACJC,EACAC,OACEC,iBAAiB,MAAEC,IAHjB,QAKJC,EALI,KAMJC,EANI,aAOJC,GAAe,EAPX,SAQJC,EAAW,GARP,QASJC,EAAU,GATN,SAUJC,EAAW,IACTX,EAEEY,EAAcF,GAAWC,EACzBE,EAAeC,IAAMC,eAAe9B,IAAO+B,QAAS/B,IAAOgC,WAAYV,GAEvEW,EAAeC,mBACfC,EAAiBD,mBAcvB,OAZAE,oBAAU,KACR,MAAMC,EAAcC,IACdA,EAAEC,SAAWJ,EAAeK,SAAWF,EAAEC,SAAWN,EAAaO,SACnE5B,GAAe,IAInB,OADAhB,SAAS6C,iBAAiB,QAASJ,GAC5B,KACLzC,SAAS8C,oBAAoB,QAASL,KAEvC,IAGD,uBAAQM,UAAU,gBAChB,uBAAQA,UAAU,aAChB,kBAAC,IAAD,CAAK1B,MAAOA,EAAO2B,YAAavB,EAASC,KAAMA,EAAME,SAAUA,IAC/D,kBAACqB,EAAA,EAAD,MACA,kBAACC,EAAA,EAAD,KACE,yBAAKH,UAAU,kBACb,4BAAM,GAAEpB,EAAe,OAAS,KAAKN,KACrC,yBAAK0B,UAAWI,IAAMC,oBACpB,kBAAC,IAAD,CAAKL,UAAWI,IAAME,UAAW7B,MAAOA,EAAOH,MAAOI,EAAS6B,IAAKjC,KAEtE,6BAAS0B,UAAWI,IAAMI,YAAaC,wBAAyB,CAAEC,OAAQvC,KAC1E,kBAACwC,EAAD,CAASxE,iBAAkB8C,EAAc7C,OAAQkC,IAChDU,GACC,yBAAKgB,UAAWI,IAAMQ,OACpB,uBAAQC,KAAO,IAAG/B,EAAWgC,KAAK,OAAOC,UAAWjC,GAApD,OAGA,uBAAQ+B,KAAO,IAAG9B,EAAY+B,KAAK,OAAOC,UAAWhC,GAArD,QAKJ,yBAAKiB,UAAWI,IAAMY,cACpB,kBAAC,IAAD,CACEC,KAAK,KACLC,KAAK,iBACLd,MAAO,CAAEe,YAAa,MAAOC,MAAO,aAEtC,0BAAMpB,UAAWI,IAAMiB,OACpBzC,EACI,4BACA,2CAIX,yBACEoB,UAAWI,IAAMkB,cACjBC,QAAS,IAAMtD,GAAe,GAC9BuD,IAAKlC,GAHP,MAOCtB,GAAe,yBAAKZ,IAAKqE,IAASzB,UAAWI,IAAMsB,WAAYF,IAAKhC,S","file":"component---src-templates-post-post-jsx-fccbf05005b20f47216a.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/support-33c35255f1ec0d2018233854b8e15bd1.jpg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bannerImgContainer\":\"post-module--bannerImgContainer--3SopW\",\"bannerImg\":\"post-module--bannerImg--2yAgf\",\"blogArticle\":\"post-module--blogArticle--1Ro02\",\"links\":\"post-module--links--LF9k2\",\"announcement\":\"post-module--announcement--3oN86\",\"label\":\"post-module--label--1Jlc5\",\"hamburgerText\":\"post-module--hamburgerText--35twO\",\"supportImg\":\"post-module--supportImg--3SMYv\"};","/* eslint-disable func-names */\n/* Vendor imports */\nimport React from 'react';\n/* App imports */\nimport Config from '../../../config';\n\nclass Comments extends React.Component {\n  componentDidMount() {\n    const { pageCanonicalUrl, pageId } = this.props;\n\n    if (window.DISQUS) {\n      window.DISQUS.reset({\n        reload: true,\n        config() {\n          this.page.url = pageCanonicalUrl;\n          this.page.identifier = pageId;\n        },\n      });\n    } else {\n      window.disqus_config = () => {\n        this.page.url = pageCanonicalUrl;\n        this.page.identifier = pageId;\n      };\n      (function () {\n        // eslint-disable-next-line no-undef\n        const d = document;\n        const s = d.createElement('script');\n        s.src = Config.disqusScript;\n        s.setAttribute('data-timestamp', +new Date());\n        (d.head || d.body).appendChild(s);\n      })();\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <div id=\"disqus_thread\" />\n      </div>\n    );\n  }\n}\n\nexport default Comments;\n","import React, { useState, useEffect, useRef } from 'react';\nimport { Layout, Button } from 'antd';\nimport { graphql } from 'gatsby';\nimport Img from 'gatsby-image';\nimport FeatherIcon from 'feather-icons-react';\nimport Header from '../../components/PageLayout/Header';\nimport SidebarWrapper from '../../components/PageLayout/Sidebar';\nimport SEO from '../../components/Seo';\nimport Comment from '../../components/Comment';\nimport Config from '../../../config';\nimport Utils from '../../utils/pageUtils';\nimport support from '../../images/support.jpg';\n\nimport 'prismjs/themes/prism-solarizedlight.css';\nimport './highlight-syntax.less';\nimport style from './post.module.less';\n\nconst Post = ({ data }) => {\n  const [showSupport, setShowSupport] = useState(false);\n  const { html, frontmatter } = data.markdownRemark;\n  const {\n    title,\n    cover: {\n      childImageSharp: { fluid },\n    },\n    excerpt,\n    path,\n    isTranslated = false,\n    keywords = [],\n    prePage = '',\n    nextPage = '',\n  } = frontmatter;\n\n  const hasLinkPage = prePage || nextPage; // 是否有上一页 | 下一页\n  const canonicalUrl = Utils.resolvePageUrl(Config.siteUrl, Config.pathPrefix, path);\n\n  const goSupportRef = useRef();\n  const supportCodeRef = useRef();\n\n  useEffect(() => {\n    const hideSupport = e => {\n      if (e.target !== supportCodeRef.current && e.target !== goSupportRef.current) {\n        setShowSupport(false);\n      }\n    };\n    document.addEventListener('click', hideSupport);\n    return () => {\n      document.removeEventListener('click', hideSupport);\n    };\n  }, []);\n\n  return (\n    <Layout className=\"outerPadding\">\n      <Layout className=\"container\">\n        <SEO title={title} description={excerpt} path={path} keywords={keywords} />\n        <Header />\n        <SidebarWrapper>\n          <div className=\"marginTopTitle\">\n            <h1>{`${isTranslated ? '[译] ' : ''}${title}`}</h1>\n            <div className={style.bannerImgContainer}>\n              <Img className={style.bannerImg} fluid={fluid} title={excerpt} alt={title} />\n            </div>\n            <article className={style.blogArticle} dangerouslySetInnerHTML={{ __html: html }} />\n            <Comment pageCanonicalUrl={canonicalUrl} pageId={title} />\n            {hasLinkPage && (\n              <div className={style.links}>\n                <Button href={`/${prePage}`} type=\"link\" disabled={!prePage}>\n                  上一章\n                </Button>\n                <Button href={`/${nextPage}`} type=\"link\" disabled={!nextPage}>\n                  下一章\n                </Button>\n              </div>\n            )}\n            <div className={style.announcement}>\n              <FeatherIcon\n                size=\"19\"\n                icon=\"alert-triangle\"\n                style={{ marginRight: '8px', color: '#fa8c16' }}\n              />\n              <span className={style.label}>\n                {isTranslated\n                  ? `著作权归原作者所有，本译文仅供学习分享，禁做商用。`\n                  : `著作权归作者所有。商业转载请联系作者获得授权；非商业转载请注明作者、出处。`}\n              </span>\n            </div>\n          </div>\n          <div\n            className={style.hamburgerText}\n            onClick={() => setShowSupport(true)}\n            ref={goSupportRef}\n          >\n            赞赏\n          </div>\n          {showSupport && <img src={support} className={style.supportImg} ref={supportCodeRef} />}\n        </SidebarWrapper>\n      </Layout>\n    </Layout>\n  );\n};\n\nexport const pageQuery = graphql`\n  query ($postPath: String!) {\n    markdownRemark(frontmatter: { path: { eq: $postPath } }) {\n      html\n      timeToRead\n      frontmatter {\n        title\n        date(formatString: \"DD MMM YYYY\")\n        tags\n        path\n        excerpt\n        keywords\n        isTranslated\n        prePage\n        nextPage\n        cover {\n          childImageSharp {\n            fluid(maxWidth: 1000) {\n              ...GatsbyImageSharpFluid_tracedSVG\n            }\n          }\n        }\n      }\n    }\n    allMarkdownRemark(\n      filter: {\n        frontmatter: { path: { ne: $postPath } }\n        fileAbsolutePath: { regex: \"/index.md$/\" }\n      }\n    ) {\n      edges {\n        node {\n          frontmatter {\n            path\n            title\n            tags\n            excerpt\n            cover {\n              childImageSharp {\n                fluid(maxWidth: 600) {\n                  ...GatsbyImageSharpFluid_tracedSVG\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport default Post;\n"],"sourceRoot":""}